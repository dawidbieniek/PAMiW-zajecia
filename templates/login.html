<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Logowanie</title>

    <script>
        window.addEventListener("load", function () {
            form = document.getElementById("loginForm");
            form.addEventListener("submit", function (event) {
                event.preventDefault();
                data = new FormData(form);
                json = JSON.stringify(Object.fromEntries(data));

                fetch("/login.html", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: json
                }).then((response) => response.text())
                    .then((text) => {
                        document.getElementById("loginMsg").style.display = "Block"
                        if (text == "Invalid")
                            document.getElementById("loginMsg").innerHTML = "Błędne dane!"
                        else if (text == "Empty")
                            document.getElementById("loginMsg").innerHTML = "Wprowadź dane!"
                        else
                            document.getElementById("loginMsg").innerHTML = "Zalogowano!"
                    });
            });
        });
    </script>

</head>

<body>
    <p>
        <a href="/..">Powrót</a>
    </p>
    <h1>Logowanie</h1>
    <form id="loginForm" action="" method="post" enctype="multipart/form-data">
        <label>Login</label>
        <input name="username" maxlength="32" type="text" />
        <label>Hasło</label>
        <input name="password" maxlength="32" type="password" />
        <input name="login" value="Zaloguj" type="submit" />
    </form>
    <p id="loginMsg" style="display:none;"></p>
</body>

</html>