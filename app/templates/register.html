{%extends "base.html"%}
{%block title%}Rejestracja{%endblock%}

{%block head%}
<script>
    function sendForm(form) {
        event.preventDefault();

        data = new FormData(form);
        json = JSON.stringify(Object.fromEntries(data));

        fetch("{{url_for('registerPage')}}", {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: json
        })
            .then((response) => response.text())
            .then((text) => {
                document.getElementById("msg").style.display = "Block"
                document.getElementById("msg").innerText = text
            });
    }
</script>
{%endblock%}

{%block contents%}
<p><a href="{{url_for('loginPage')}}">Powrót</a></p>
<h1>Rejestracja</h1>
<form onsubmit="sendForm(this)" method="post" enctype="multipart/form-data">
    <table>
        <tbody>
            <tr>
                <td>Login:</td>
                <td>
                    <input name="username" maxlength="32" type="text" required />
                </td>
            </tr>
            <tr>
                <td>Hasło:</td>
                <td>
                    <input name="password" maxlength="32" type="password" required />
                </td>
            </tr>            
            <tr>
                <td>Powtórz hasło:</td>
                <td>
                    <input name="repPassword" maxlength="32" type="password" />
                </td>
            </tr>
            <tr>
                <td>
                    <button type="submit">Zarejestruj</button>
                </td>
            </tr>
        </tbody>
    </table>
</form>
<p id="msg" style="display:none;"></p>
{%endblock%}