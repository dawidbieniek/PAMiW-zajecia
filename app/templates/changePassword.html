{%extends "base.html"%}
{%block title%}Zmiana hasła dla {{user.username}}{%endblock%}

{%block head%}
<script>
    function sendForm(form) {
        event.preventDefault();

        data = new FormData(form);
        json = JSON.stringify(Object.fromEntries(data));

        fetch("{{url_for('changePasswordPage')}}", {
            method: "UPDATE",
            headers: { "Content-Type": "application/json" },
            body: json
        })
            .then((response) => response.text())
            .then((text) => {
                document.getElementById("msg").style.display = "Block"
                document.getElementById("msg").innerText = text
            });
    }
</script>
{%endblock%}

{%block contents%}
<p><a href="{{url_for('indexPage')}}">Strona główna</a></p>
<form onsubmit="sendForm(this)" , method="UPDATE", enctype="multipart/form-data">
    Hasło:<input name="password" maxlength="32" type="password" required />
    Nowe hasło:<input name="newPassword" maxlength="32" type="password" required />
    Powtórz nowe hasło:<input name="repNewPassword" maxlength="32" type="password" required />
    <button type="submit">Zmień hasło</button>
</form>

<p id="msg" style="display:none;"></p>
{%endblock%}